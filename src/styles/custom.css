/* ===== Font Imports ===== */
@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.min.css');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap');

/* ===== Starlight Theme Overrides — Dark (default) ===== */
:root,
:root[data-theme='dark'] {
  /* Fonts */
  --__sl-font: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  --__sl-font-mono: 'JetBrains Mono', 'Consolas', monospace;
  --sl-font: var(--__sl-font);
  --sl-font-mono: var(--__sl-font-mono);

  /* Accent colors */
  --sl-color-accent-low: rgba(167, 139, 250, 0.1);
  --sl-color-accent: #a78bfa;
  --sl-color-accent-high: #c4b5fd;

  --sl-color-white: #f0f6fc;
  --sl-color-gray-1: #e6edf3;
  --sl-color-gray-2: #8b949e;
  --sl-color-gray-3: #6e7681;
  --sl-color-gray-4: #30363d;
  --sl-color-gray-5: #21262d;
  --sl-color-gray-6: #161b22;
  --sl-color-black: #0d1117;

  --sl-color-bg-nav: #161b22;
  --sl-color-bg-sidebar: #0d1117;
  --sl-color-hairline-shade: #30363d;
  --sl-color-hairline-light: #21262d;

  --sl-color-text: #e6edf3;
  --sl-color-text-accent: #e6edf3;
  --sl-color-text-invert: #0d1117;

  /* Layout */
  --sl-nav-height: 48px;
  --sl-sidebar-width: 280px;
  --sl-content-width: 800px;

  /* Typography */
  --sl-text-xs: 0.68rem;
  --sl-text-sm: 0.78rem;
  --sl-text-base: 0.82rem;
  --sl-text-body: 0.82rem;
  --sl-text-h1: 1.6rem;
  --sl-text-h2: 1.25rem;
  --sl-text-h3: 1.05rem;
  --sl-text-h4: 0.88rem;
  --sl-text-code: 0.82em;
  --sl-line-height: 1.75;
  --sl-line-height-headings: 1.3;

  /* Custom properties */
  --cd-bg-page: #0d1117;
  --cd-bg-header: #161b22;
  --cd-bg-sidebar: #0d1117;
  --cd-bg-card: #161b22;
  --cd-bg-code: #161b22;
  --cd-bg-code-inline: #1c2129;
  --cd-bg-hover: #1c2129;
  --cd-bg-active: #1f2937;
  --cd-bg-footer: #010409;
  --cd-bg-admonition: #161b22;
  --cd-bg-table-head: #161b22;
  --cd-bg-table-stripe: #0f1318;
  --cd-text-primary: #e6edf3;
  --cd-text-secondary: #8b949e;
  --cd-text-heading: #f0f6fc;
  --cd-text-link: #a78bfa;
  --cd-text-link-hover: #c4b5fd;
  --cd-border-color: #30363d;
  --cd-border-subtle: #21262d;
  --cd-accent: #a78bfa;
  --cd-accent-hover: #c4b5fd;
  --cd-accent-bg: rgba(167, 139, 250, 0.1);
  --cd-header-text: #e6edf3;
  --cd-shadow-header: 0 1px 2px rgba(0, 0, 0, 0.4);
}

/* ===== Starlight Theme Overrides — Light ===== */
:root[data-theme='light'] {
  --sl-color-accent-low: rgba(124, 58, 237, 0.08);
  --sl-color-accent: #7c3aed;
  --sl-color-accent-high: #6d28d9;

  --sl-color-white: #1f2328;
  --sl-color-gray-1: #1f2328;
  --sl-color-gray-2: #656d76;
  --sl-color-gray-3: #8b949e;
  --sl-color-gray-4: #d0d7de;
  --sl-color-gray-5: #e3e8ed;
  --sl-color-gray-6: #f6f8fa;
  --sl-color-black: #ffffff;

  --sl-color-bg-nav: #161b22;
  --sl-color-bg-sidebar: #f6f8fa;
  --sl-color-hairline-shade: #d0d7de;
  --sl-color-hairline-light: #e3e8ed;

  --sl-color-text: #1f2328;
  --sl-color-text-accent: #e6edf3;
  --sl-color-text-invert: #ffffff;

  --cd-bg-page: #ffffff;
  --cd-bg-header: #161b22;
  --cd-bg-sidebar: #f6f8fa;
  --cd-bg-card: #f6f8fa;
  --cd-bg-code: #f6f8fa;
  --cd-bg-code-inline: #eff1f3;
  --cd-bg-hover: #eaeef2;
  --cd-bg-active: #dde2e7;
  --cd-bg-footer: #f6f8fa;
  --cd-bg-admonition: #f6f8fa;
  --cd-bg-table-head: #f6f8fa;
  --cd-bg-table-stripe: #f6f8fa;
  --cd-text-primary: #1f2328;
  --cd-text-secondary: #656d76;
  --cd-text-heading: #1f2328;
  --cd-text-link: #7c3aed;
  --cd-text-link-hover: #6d28d9;
  --cd-border-color: #d0d7de;
  --cd-border-subtle: #e3e8ed;
  --cd-accent: #7c3aed;
  --cd-accent-hover: #6d28d9;
  --cd-accent-bg: rgba(124, 58, 237, 0.08);
  --cd-header-text: #e6edf3;
  --cd-shadow-header: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* ===== Base Typography ===== */
@media (prefers-reduced-motion: no-preference) {
  html {
    scroll-behavior: smooth;
  }
}

body {
  font-size: var(--sl-text-base);
  line-height: var(--sl-line-height);
}

/* ===== Custom Scrollbar ===== */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: var(--cd-bg-page);
}
::-webkit-scrollbar-thumb {
  background: var(--cd-border-color);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--cd-text-secondary);
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--cd-border-color) var(--cd-bg-page);
}

/* ===== Header Overrides ===== */
header.header {
  background-color: var(--cd-bg-header) !important;
  box-shadow: var(--cd-shadow-header);
  height: 48px;
  border-bottom-color: transparent !important;
}

header.header starlight-theme-select select {
  color: var(--cd-header-text);
  background-color: var(--cd-bg-header);
}

header.header starlight-theme-select select option {
  background-color: var(--cd-bg-header);
  color: var(--cd-header-text);
}

/* ===== Hero Section ===== */
.hero {
  padding-bottom: 1rem;
}

/* ===== Profile Card ===== */
.profile-card {
  text-align: center;
  max-width: var(--sl-content-width);
  margin: 0 auto 2rem;
  padding: 0 1rem;
}

.profile-name {
  color: var(--cd-text-secondary);
  font-size: var(--sl-text-sm);
  margin: 0 0 0.5rem;
}

.profile-desc {
  color: var(--cd-text-primary);
  font-size: var(--sl-text-sm);
  margin: 0 0 0.75rem;
}

.profile-links {
  display: flex;
  justify-content: center;
  gap: 0.75rem;
}

.profile-link {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  color: var(--cd-text-secondary);
  font-size: var(--sl-text-xs);
  line-height: 1;
  text-decoration: none;
  padding: 5px 10px;
  border: 1px solid var(--cd-border-color);
  border-radius: 16px;
  transition: color 0.15s, border-color 0.15s;
}

.profile-link:hover {
  color: var(--cd-text-link);
  border-color: var(--cd-text-link);
}

.profile-link svg {
  flex-shrink: 0;
  vertical-align: middle;
}

/* ===== Card Grid ===== */
.sl-link-card {
  border-color: var(--cd-border-color);
  border-radius: 8px;
  transition: border-color 0.15s, background 0.15s;
}

.sl-link-card:hover {
  border-color: var(--cd-accent);
  background: var(--cd-accent-bg);
}

/* ===== Sidebar Overrides ===== */
.sidebar-pane {
  background-color: var(--cd-bg-sidebar);
}

@media (min-width: 50rem) {
  .sidebar-pane {
    background-color: var(--cd-bg-sidebar);
    border-inline-end-color: var(--cd-border-color);
  }
}

/* Sidebar navigation links */
nav.sidebar a {
  font-size: var(--sl-text-sm);
  color: var(--cd-text-secondary);
  border-radius: 6px;
  transition: background 0.15s, color 0.15s;
}
nav.sidebar a:hover {
  background: var(--cd-bg-hover);
  color: var(--cd-text-primary);
}
nav.sidebar a[aria-current='page'] {
  background: var(--cd-accent-bg);
  color: var(--cd-accent);
  font-weight: 600;
}

/* Sidebar group labels */
.sidebar-content summary,
.sidebar-content .large {
  font-size: 0.76rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--cd-text-primary);
}

/* ===== Content Area ===== */
.sl-container {
  max-width: var(--sl-content-width);
}

.content-panel + .content-panel {
  border-top-color: var(--cd-border-subtle);
}

/* ===== Content Typography ===== */
.sl-markdown-content h1 {
  font-size: var(--sl-text-h1);
  font-weight: 700;
  color: var(--cd-text-heading);
  margin-bottom: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--cd-border-color);
  line-height: var(--sl-line-height-headings);
}

.sl-markdown-content h2 {
  font-size: var(--sl-text-h2);
  font-weight: 700;
  color: var(--cd-text-heading);
  margin-top: 40px;
  margin-bottom: 16px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--cd-border-subtle);
  line-height: 1.35;
}

.sl-markdown-content h3 {
  font-size: var(--sl-text-h3);
  font-weight: 600;
  color: var(--cd-text-heading);
  margin-top: 32px;
  margin-bottom: 12px;
  line-height: 1.4;
}

.sl-markdown-content p {
  margin-bottom: 16px;
  color: var(--cd-text-primary);
}

.sl-markdown-content a {
  color: var(--cd-text-link);
  text-decoration: none;
  transition: color 0.15s;
}
.sl-markdown-content a:hover {
  color: var(--cd-text-link-hover);
  text-decoration: underline;
}

.sl-markdown-content strong {
  font-weight: 600;
  color: var(--cd-text-heading);
}

/* ===== Lists ===== */
.sl-markdown-content ul,
.sl-markdown-content ol {
  margin-bottom: 16px;
  padding-left: 24px;
}

.sl-markdown-content li {
  margin-bottom: 4px;
  color: var(--cd-text-primary);
}

.sl-markdown-content li::marker {
  color: var(--cd-text-secondary);
}

/* ===== Inline Code ===== */
.sl-markdown-content :not(pre) > code {
  background: var(--cd-bg-code-inline);
  color: var(--cd-text-primary);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.8em;
  font-family: var(--sl-font-mono);
}

/* ===== Code Blocks ===== */
.sl-markdown-content pre {
  background: var(--cd-bg-code) !important;
  border: 1px solid var(--cd-border-color);
  border-radius: 8px;
  padding: 16px;
  font-size: 0.78rem;
  line-height: 1.6;
  overflow-x: auto;
}

.sl-markdown-content pre code {
  font-family: var(--sl-font-mono);
  font-size: 0.78rem;
  background: transparent;
  padding: 0;
  border-radius: 0;
}

/* Expressive Code overrides */
.expressive-code {
  margin-bottom: 20px;
}

.expressive-code .frame {
  border: 1px solid var(--cd-border-color);
  border-radius: 8px;
  overflow: hidden;
}

.expressive-code pre {
  border: none;
  border-radius: 0;
}

/* ===== Admonitions / Callouts ===== */
.starlight-aside {
  border-radius: 8px;
  border: 1px solid var(--cd-border-color);
  margin-bottom: 20px;
  overflow: hidden;
}

.starlight-aside--note {
  border-left: 3px solid var(--cd-accent);
}

.starlight-aside--caution {
  border-left: 3px solid #d29922;
}

.starlight-aside--tip {
  border-left: 3px solid #3fb950;
}

.starlight-aside--danger {
  border-left: 3px solid #f85149;
}

.starlight-aside .starlight-aside__title {
  font-size: var(--sl-text-sm);
  font-weight: 700;
  background: var(--cd-bg-admonition);
  padding: 10px 16px;
}

.starlight-aside .starlight-aside__content {
  padding: 12px 16px;
}

.starlight-aside .starlight-aside__content p:last-child {
  margin-bottom: 0;
}

/* ===== Tables ===== */
.sl-markdown-content table {
  display: table;
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--sl-text-sm);
  margin-bottom: 20px;
  border: 1px solid var(--cd-border-color);
  border-radius: 8px;
  overflow: hidden;
}

.sl-markdown-content th {
  background: var(--cd-bg-table-head);
  color: var(--cd-text-heading);
  font-weight: 600;
  text-align: left;
  padding: 10px 16px;
  border-bottom: 1px solid var(--cd-border-color);
}

.sl-markdown-content th:first-child,
.sl-markdown-content td:first-child {
  padding-left: 20px;
}

.sl-markdown-content td {
  padding: 10px 16px;
  border-bottom: 1px solid var(--cd-border-subtle);
  color: var(--cd-text-primary);
  overflow-wrap: break-word;
  word-break: break-word;
}

.sl-markdown-content tr:last-child td {
  border-bottom: none;
}

.sl-markdown-content tr:nth-child(even) td {
  background: var(--cd-bg-table-stripe);
}

/* ===== .light-bg class for images on dark theme ===== */
.light-bg {
  background: #ffffff;
  padding: 16px;
  border-radius: 8px;
  display: block;
  margin: 16px auto;
  max-width: 100%;
}

/* ===== Blockquotes (Q&A / 학습 로그 format) ===== */
.sl-markdown-content blockquote {
  border-left: 3px solid var(--cd-accent);
  padding: 8px 16px;
  margin: 0 0 16px;
  background: var(--cd-accent-bg);
  border-radius: 0 8px 8px 0;
  color: var(--cd-text-primary);
}

.sl-markdown-content blockquote p {
  margin-bottom: 8px;
}

.sl-markdown-content blockquote p:last-child {
  margin-bottom: 0;
}

/* ===== Footnote Tooltip (나무위키 스타일 각주) ===== */
.fn-ref {
  position: relative;
  display: inline;
}

.fn-ref a {
  color: var(--cd-accent);
  text-decoration: none;
  font-size: 0.75em;
  font-weight: 700;
  vertical-align: super;
  line-height: 0;
  cursor: pointer;
}

.fn-ref a:hover {
  text-decoration: underline;
}

.fn-tooltip {
  display: none;
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  width: max-content;
  max-width: 360px;
  padding: 10px 14px;
  background: var(--cd-bg-card);
  border: 1px solid var(--cd-border-color);
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  font-size: 0.78rem;
  line-height: 1.5;
  color: var(--cd-text-primary);
  z-index: 100;
  pointer-events: none;
}

.fn-tooltip::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: var(--cd-border-color);
}

.fn-tooltip .fn-title {
  display: block;
  margin-bottom: 6px;
}

.fn-tooltip .fn-title::before {
  content: 'Q: ';
  font-weight: 700;
  color: var(--cd-accent);
}

.fn-tooltip .fn-title a {
  color: var(--cd-accent);
  font-weight: 700;
  text-decoration: none;
  font-size: inherit;
  vertical-align: baseline;
  line-height: inherit;
}

.fn-tooltip .fn-title a:hover {
  text-decoration: underline;
}

.fn-tooltip .fn-desc {
  display: block;
  color: var(--cd-text-secondary);
}

.fn-tooltip .fn-desc::before {
  content: 'A: ';
  font-weight: 700;
  color: var(--cd-text-primary);
}

.fn-ref:hover .fn-tooltip {
  display: block;
  pointer-events: auto;
}

/* ===== Footer / Pagination ===== */
.pagination-links {
  border-top-color: var(--cd-border-color);
}

.pagination-links a {
  border-color: var(--cd-border-color);
  border-radius: 8px;
  transition: border-color 0.15s, background 0.15s;
}

.pagination-links a:hover {
  border-color: var(--cd-accent);
  background: var(--cd-accent-bg);
}

/* ===== Right TOC Sidebar ===== */
starlight-toc a {
  font-size: 0.72rem;
  color: var(--cd-text-secondary);
  transition: color 0.15s;
  line-height: 1.5;
}

starlight-toc a:hover {
  color: var(--cd-text-primary);
}

starlight-toc a[aria-current='true'] {
  color: var(--cd-accent);
}

/* ===== Selection Color ===== */
::selection {
  background: rgba(167, 139, 250, 0.3);
  color: inherit;
}

/* ===== Mobile Menu Button Override ===== */
starlight-menu-button button {
  background-color: transparent !important;
  color: var(--cd-header-text) !important;
  box-shadow: none !important;
  border-radius: 4px !important;
  width: 32px !important;
  height: 32px !important;
  padding: 4px !important;
}

starlight-menu-button button:hover {
  background-color: rgba(255, 255, 255, 0.1) !important;
}

:root[data-theme='light'] starlight-menu-button button {
  background-color: transparent !important;
  color: var(--cd-header-text) !important;
}

/* ===== Recent Updates List ===== */
.recent-updates {
  max-width: var(--sl-content-width);
  margin: 0 auto;
  padding: 0 1rem;
}

.recent-updates h2 {
  font-size: var(--sl-text-h3);
  color: var(--cd-text-heading);
  margin-bottom: 1rem;
  font-weight: 600;
}

.update-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.update-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.6rem 0;
  border-bottom: 1px solid var(--cd-border-subtle);
}

.update-item:last-child {
  border-bottom: none;
}

.category-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 0.68rem;
  font-family: var(--sl-font-mono);
  font-weight: 500;
  white-space: nowrap;
  flex-shrink: 0;
}

.badge-vulkan {
  background: rgba(239, 68, 68, 0.1);
  color: #f87171;
  border: 1px solid rgba(239, 68, 68, 0.3);
}

.badge-cuda {
  background: rgba(34, 197, 94, 0.1);
  color: #4ade80;
  border: 1px solid rgba(34, 197, 94, 0.3);
}

.badge-articles {
  background: rgba(96, 165, 250, 0.1);
  color: #60a5fa;
  border: 1px solid rgba(96, 165, 250, 0.3);
}

:root[data-theme='light'] .badge-vulkan {
  background: rgba(220, 38, 38, 0.08);
  color: #dc2626;
  border: 1px solid rgba(220, 38, 38, 0.2);
}

:root[data-theme='light'] .badge-cuda {
  background: rgba(22, 163, 74, 0.08);
  color: #16a34a;
  border: 1px solid rgba(22, 163, 74, 0.2);
}

:root[data-theme='light'] .badge-articles {
  background: rgba(37, 99, 235, 0.08);
  color: #2563eb;
  border: 1px solid rgba(37, 99, 235, 0.2);
}

.update-link {
  color: var(--cd-text-primary);
  text-decoration: none;
  font-size: var(--sl-text-sm);
  font-weight: 500;
  flex: 1;
  min-width: 0;
  transition: color 0.15s;
}

.update-link:hover {
  color: var(--cd-text-link);
}

.update-item time {
  color: var(--cd-text-secondary);
  font-size: var(--sl-text-xs);
  font-family: var(--sl-font-mono);
  white-space: nowrap;
  flex-shrink: 0;
}

.update-empty {
  color: var(--cd-text-secondary);
  font-size: var(--sl-text-sm);
  font-style: italic;
  margin: 0;
}

@media (max-width: 30rem) {
  .update-item {
    flex-wrap: wrap;
    gap: 0.4rem;
  }
  .update-item time {
    margin-left: auto;
  }
}

/* ===== Responsive Overrides ===== */
@media (max-width: 1200px) {
  /* Hide right TOC on medium screens */
  .right-sidebar-container {
    display: none;
  }
}

@media (max-width: 600px) {
  /* Hide search on very small screens */
  .search-wrapper,
  site-search {
    display: none !important;
  }
}

/* ===== Print Styles ===== */
@media print {
  header.header,
  nav.sidebar,
  .right-sidebar-container,
  starlight-menu-button {
    display: none !important;
  }
}
